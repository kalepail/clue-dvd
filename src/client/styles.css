@import "tailwindcss";

/*
 * Clue DVD Game - 1920s Mystery Theme
 * Custom theme built on Tailwind CSS v4
 */

@theme {
  /* Colors - 1920s Mystery Palette */
  --color-background: #1a1512;
  --color-foreground: #e8e0d5;

  --color-card: #342c25;
  --color-card-foreground: #e8e0d5;

  --color-popover: #342c25;
  --color-popover-foreground: #e8e0d5;

  --color-primary: #c4a35a;
  --color-primary-foreground: #1a1512;

  --color-secondary: #2a231e;
  --color-secondary-foreground: #e8e0d5;

  --color-muted: #2a231e;
  --color-muted-foreground: #a89b8c;

  --color-accent: #3d342c;
  --color-accent-foreground: #e8e0d5;

  --color-destructive: #8b3a3a;
  --color-destructive-foreground: #f5efe6;

  --color-success: #3a6b4a;
  --color-success-foreground: #f5efe6;

  --color-border: #4a4035;
  --color-input: #2a231e;
  --color-ring: #c4a35a;

  /* Additional theme colors */
  --color-gold: #c4a35a;
  --color-gold-light: #ddc88a;
  --color-cream: #f5efe6;

  /* Typography */
  --font-display: "Cinzel", serif;
  --font-body: "Crimson Text", serif;

  /* Border radius */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;

  /* Card dimensions */
  --card-aspect-ratio: 0.76;
  --reveal-card-aspect-ratio: 0.76;
  --selection-card-max-width: 230px;
}

/* Base styles */
* {
  @apply border-border;
}

body {
  @apply bg-background text-foreground antialiased;
  font-family: var(--font-body);
  line-height: 1.6;
}

#root {
  @apply min-h-screen flex flex-col;
}

/* Typography */
h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-display);
  @apply text-primary font-semibold tracking-wide;
}

h1 {
  @apply text-4xl uppercase tracking-widest;
}

h2 {
  @apply text-2xl tracking-wide;
}

h3 {
  @apply text-xl;
}

/* Custom component styles that work with shadcn */
.clue-card {
  @apply bg-gradient-to-br from-card to-accent border-l-4 border-primary;
  @apply p-5 mb-4 relative rounded-r-lg;
}

.clue-card::before {
  content: attr(data-number);
  @apply absolute -top-2.5 -left-2.5 w-8 h-8;
  @apply bg-primary text-primary-foreground rounded-full;
  @apply flex items-center justify-center;
  font-family: var(--font-display);
  @apply font-bold text-sm;
}

/* Progress bar */
.progress-bar {
  @apply h-2 bg-secondary rounded-full overflow-hidden;
}

.progress-fill {
  @apply h-full bg-gradient-to-r from-primary to-gold-light transition-all duration-500;
}

/* Game grid items */
.game-item {
  @apply p-4 bg-secondary border border-border rounded-lg text-center;
  @apply transition-all duration-200 cursor-pointer;
}

.game-item:hover {
  @apply border-primary -translate-y-0.5;
}

.game-item.eliminated {
  @apply opacity-40 line-through cursor-default;
}

.game-item.selected {
  @apply border-primary bg-card shadow-lg shadow-primary/20;
}

/* History items */
.history-item {
  @apply flex gap-4 p-4 border-b border-border last:border-b-0;
}

.history-sequence {
  font-family: var(--font-display);
  @apply text-primary min-w-8;
}

.history-actor {
  @apply text-gold-light font-semibold;
}

.history-details {
  @apply text-muted-foreground text-sm;
}

/* Badge variants */
.badge-setup { @apply text-muted-foreground; }
.badge-in-progress { @apply text-primary; }
.badge-solved { @apply text-success; }
.badge-abandoned { @apply text-destructive; }

/* Loading spinner */
.loading-spinner {
  @apply inline-block w-5 h-5 border-2 border-primary border-r-transparent rounded-full animate-spin;
}

/* Animations */
@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Turn announcement toast */
.turn-toast {
  position: fixed;
  top: 1.25rem;
  left: 50%;
  transform: translateX(-50%) translateY(-8px);
  padding: 0.75rem 1.5rem;
  background: rgba(52, 44, 37, 0.95);
  border: 1px solid var(--color-primary);
  color: var(--color-foreground);
  font-family: var(--font-display);
  letter-spacing: 0.08em;
  text-transform: uppercase;
  border-radius: 999px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
  opacity: 0;
  z-index: 50;
  transition: opacity 0.25s ease, transform 0.25s ease;
}

.turn-toast-show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* ============================================
   SOLUTION CARDS - Magnifying Glass Effect
   ============================================
   Mimics the physical Clue DVD Game red magnifying glass
   that reveals blue symbols hidden under red shapes.
*/

.solution-cards-container {
  @apply text-center space-y-4 mt-6;
}

.solution-cards-title {
  @apply flex items-center justify-center gap-2 text-xl;
}

.solution-cards-subtitle {
  @apply text-muted-foreground text-sm;
}

.solution-cards-instruction {
  @apply text-muted-foreground text-xs mt-4 italic;
}

.solution-cards-grid {
  @apply grid grid-cols-2 lg:grid-cols-4 gap-4 max-w-4xl mx-auto;
}

/* Individual Solution Card */
.solution-card {
  @apply relative p-3 rounded-lg transition-all duration-300;
  background-image: url("/images/Back of card design.png");
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-color: #2a231e;
  background-blend-mode: multiply;
  border: 2px solid #4a2020;
  aspect-ratio: var(--card-aspect-ratio);
  cursor: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32' viewBox='0 0 24 24' fill='none' stroke='%23c4a35a' stroke-width='2'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'/%3E%3C/svg%3E") 16 16, pointer;
}

.solution-card:hover {
  @apply shadow-lg;
  box-shadow: 0 0 20px rgba(196, 163, 90, 0.4);
  transform: scale(1.02);
}

.solution-card-loading {
  @apply flex items-center justify-center min-h-[180px];
}

.solution-card-label {
  @apply absolute -top-2.5 left-1/2 -translate-x-1/2 px-3 py-0.5;
  @apply bg-primary text-primary-foreground rounded-full text-xs font-bold;
  font-family: var(--font-display);
  letter-spacing: 0.1em;
}

.solution-card-inner {
  @apply pt-6 pb-3 h-full flex flex-col;
}

/* Suspect selection cards */
.suspect-select-grid {
  @apply grid gap-3;
  grid-template-columns: repeat(5, minmax(150px, 1fr));
  justify-items: center;
}

.suspect-select-card {
  @apply relative w-full rounded-xl border-2 border-border bg-secondary/60 p-2 text-left transition-all duration-200;
  aspect-ratio: var(--card-aspect-ratio);
  max-width: var(--selection-card-max-width);
  margin: 0 auto;
}

.suspect-select-card:hover:not(:disabled) {
  @apply border-primary shadow-lg;
  transform: translateY(-2px);
}

.suspect-select-card.is-selected {
  border-color: var(--suspect-color);
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--suspect-color) 60%, transparent);
}

.suspect-select-card:disabled {
  @apply opacity-40 cursor-not-allowed;
}

.suspect-select-image {
  @apply w-full h-full object-cover rounded-lg;
  display: block;
}

.suspect-select-name {
  @apply absolute left-2 right-2 bottom-2 text-xs font-semibold text-cream bg-black/50 px-2 py-1 rounded-md;
}

.suspect-select-disabled {
  @apply absolute top-2 right-2 text-[10px] uppercase tracking-widest bg-black/70 text-cream px-2 py-1 rounded-full;
}

.suspect-picker-trigger {
  @apply relative w-full rounded-lg border-2 border-border bg-secondary/60 px-3 py-2 text-left transition-all duration-200 flex items-center gap-3;
  min-height: 52px;
}

.suspect-picker-trigger:hover {
  @apply border-primary shadow-md;
}

.suspect-picker-trigger:focus-visible {
  @apply outline-none ring-2 ring-primary/60;
}

.suspect-picker-trigger {
  border-color: color-mix(in oklab, var(--suspect-color) 45%, var(--color-border));
  box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--suspect-color) 35%, transparent);
}

.suspect-picker-thumb {
  @apply w-10 h-10 rounded-md object-cover;
}

.suspect-picker-name {
  @apply text-sm font-semibold text-cream;
}

.suspect-picker-placeholder {
  @apply text-sm text-muted-foreground;
}

.suspect-picker-overlay {
  @apply fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-4;
}

.suspect-picker-panel {
  @apply rounded-2xl border border-primary/40 bg-secondary p-6;
  width: min(95vw, 72rem);
  border-color: color-mix(in oklab, var(--suspect-color) 45%, var(--color-border));
  background-image:
    radial-gradient(circle at top left, color-mix(in oklab, var(--suspect-color) 22%, transparent), transparent 62%),
    linear-gradient(160deg, color-mix(in oklab, var(--suspect-color) 18%, #1a1512), #1a1512 55%);
}

.suspect-picker-header {
  @apply text-center space-y-2 mb-6;
}

.suspect-picker-title {
  @apply text-2xl;
  color: color-mix(in oklab, var(--suspect-color) 70%, var(--color-cream));
  font-family: var(--font-display);
  letter-spacing: 0.12em;
}

.suspect-picker-subtitle {
  @apply text-sm text-muted-foreground;
}

.suspect-picker-selected {
  @apply inline-flex items-center justify-center px-4 py-2 rounded-full text-sm font-semibold uppercase tracking-widest;
  background: color-mix(in oklab, var(--suspect-color) 55%, rgba(0, 0, 0, 0.6));
  color: var(--color-cream);
}

.suspect-picker-actions {
  @apply mt-6 flex flex-col gap-3 sm:flex-row sm:justify-between;
}

/* Accusation selection */
.accusation-selection-summary {
  @apply grid gap-2 text-xs uppercase tracking-[0.2em] text-muted-foreground text-center;
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

@media (min-width: 768px) {
  .accusation-selection-summary {
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }
}

.accusation-selection-summary span {
  white-space: nowrap;
}

.accusation-grid {
  @apply grid gap-3;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  justify-items: center;
}

.accusation-card {
  @apply relative w-full rounded-xl border-2 border-border bg-secondary/60 p-2 text-left transition-all duration-200;
  aspect-ratio: var(--card-aspect-ratio);
  max-width: var(--selection-card-max-width);
}

.accusation-card:hover:not(:disabled) {
  @apply border-primary shadow-lg;
  transform: translateY(-2px);
}

.accusation-card.is-selected {
  @apply border-primary ring-2 ring-primary/60;
}

.accusation-card:disabled {
  @apply opacity-40 cursor-not-allowed;
}

.accusation-card-image {
  @apply w-full h-full object-cover rounded-lg;
  display: block;
}

.accusation-card-label {
  @apply absolute left-2 right-2 bottom-2 text-xs font-semibold text-cream bg-black/50 px-2 py-1 rounded-md;
}

.accusation-card-text {
  @apply flex items-center justify-center h-full text-xs font-semibold text-cream text-center px-2;
  white-space: nowrap;
}

.accusation-card-disabled {
  @apply absolute top-2 right-2 text-[10px] uppercase tracking-widest bg-black/70 text-cream px-2 py-1 rounded-full;
}

/* Symbol Grid - 2x3 layout */
.symbol-grid {
  @apply grid gap-2 mx-auto;
  grid-template-columns: repeat(2, 1fr);
  grid-template-rows: repeat(3, 1fr);
  width: 88px;
  height: 96px;
  margin-top: auto;
  margin-bottom: -6px;
}

/* Individual Symbol Slot */
.symbol-slot {
  @apply relative w-9 h-7 rounded overflow-hidden;
  background: rgba(0, 0, 0, 0.2);
}

/* Red Obfuscation Layer - hides the symbols */
.symbol-obfuscation {
  @apply absolute inset-0 z-10 rounded;
  background: radial-gradient(ellipse at center, #9b4444 0%, #7a3333 100%);
  transition: opacity 0.4s ease-out;
}

/* Blue Symbol Icon - hidden under red */
.symbol-icon {
  @apply absolute inset-0 flex items-center justify-center text-base;
  opacity: 0;
  transform: scale(0.8);
  transition: opacity 0.4s ease-out, transform 0.3s ease-out;
  filter: drop-shadow(0 0 4px rgba(196, 163, 90, 0.6));
}

.symbol-icon-image {
  width: 22px;
  height: 22px;
}

.turn-color-button {
  background-color: transparent;
  border-color: color-mix(in oklab, var(--turn-color) 70%, var(--color-border));
  color: var(--turn-color);
}

.turn-color-button:hover {
  background-color: color-mix(in oklab, var(--turn-color) 20%, transparent);
  color: var(--turn-color);
}

/* Host lobby layout */
.host-lobby-code-card {
  background: radial-gradient(circle at top, rgba(199, 176, 124, 0.18), transparent 60%);
}

.host-lobby-code {
  text-align: center;
  font-family: var(--font-display);
  font-size: clamp(3rem, 8vw, 6rem);
  letter-spacing: 0.6em;
  color: var(--color-gold);
  padding-left: 0.6em;
}

.host-lobby-grid {
  display: grid;
  gap: 12px;
  justify-items: center;
}

.host-lobby-grid-2 {
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

.host-lobby-grid-3 {
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.host-lobby-grid-1 {
  grid-template-columns: repeat(3, minmax(0, 1fr));
  justify-content: center;
  gap: 18px;
}

.host-lobby-grid-5 {
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: 10px;
}

.host-lobby-card {
  border: 1px solid rgba(199, 176, 124, 0.3);
  border-radius: 18px;
  background: rgba(13, 18, 30, 0.8);
  padding: 10px;
  display: grid;
  gap: 8px;
  width: 100%;
  max-width: calc(var(--selection-card-max-width) * 0.9);
}

.host-lobby-portrait {
  width: 100%;
  aspect-ratio: var(--card-aspect-ratio);
  max-width: calc(var(--selection-card-max-width) * 0.75);
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(8, 12, 22, 0.6);
  margin: 0 auto;
}

.host-lobby-portrait img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.host-lobby-info {
  display: grid;
  gap: 6px;
}

.host-lobby-name {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 0.9rem;
}

.host-lobby-suspect {
  font-family: var(--font-display);
  font-size: 0.85rem;
  letter-spacing: 0.14em;
  text-transform: uppercase;
  color: var(--color-gold);
}

@media (max-width: 720px) {
  .host-lobby-grid-5 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

@media (max-width: 640px) {
  .host-lobby-grid-2,
  .host-lobby-grid-3 {
    grid-template-columns: 1fr;
  }
  .host-lobby-code {
    font-size: clamp(2.4rem, 10vw, 4rem);
    letter-spacing: 0.4em;
    padding-left: 0.4em;
  }
}

.symbol-icon-masked {
  width: 26px;
  height: 26px;
  display: inline-block;
  background-color: #c4a35a;
  mask-image: var(--symbol-icon);
  mask-repeat: no-repeat;
  mask-position: center;
  mask-size: contain;
  -webkit-mask-image: var(--symbol-icon);
  -webkit-mask-repeat: no-repeat;
  -webkit-mask-position: center;
  -webkit-mask-size: contain;
}



/* Revealed State - magnifying glass effect */
.solution-card.revealed .symbol-obfuscation {
  opacity: 0;
}

.solution-card.revealed .symbol-icon {
  opacity: 1;
  transform: scale(1);
}

/* Pulse animation on reveal */
.solution-card.revealed .symbol-grid {
  animation: symbolReveal 0.5s ease-out;
}

@keyframes symbolReveal {
  0% { filter: brightness(1); }
  50% { filter: brightness(1.3); }
  100% { filter: brightness(1); }
}

/* Magnifying glass hint */
.magnifying-hint {
  @apply flex items-center justify-center gap-1 mt-2 text-cream/60 text-xs;
  transition: opacity 0.3s ease;
}

.solution-card.revealed .magnifying-hint {
  opacity: 0;
}

/* Card type color variations */
.solution-card[data-type="suspect"] {
  background: linear-gradient(135deg, #8b3a3a 0%, #6b2a2a 100%);
}

.solution-card[data-type="item"] {
  background: linear-gradient(135deg, #8b6a3a 0%, #6b4a2a 100%);
}

.solution-card[data-type="location"] {
  background: linear-gradient(135deg, #3a6b8b 0%, #2a4a6b 100%);
}

.solution-card[data-type="time"] {
  background: linear-gradient(135deg, #5a3a8b 0%, #3a2a6b 100%);
}

/* ============================================
   SOLUTION REVEAL CARDS - Win Screen
   ============================================
*/

.solution-reveal-grid {
  @apply grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto items-start;
}

.reveal-card {
  @apply w-full relative;
  perspective: 1200px;
}

.reveal-card-inner {
  @apply w-full relative transition-transform duration-500;
  aspect-ratio: var(--reveal-card-aspect-ratio);
  transform-style: preserve-3d;
}

.reveal-card-flipped .reveal-card-inner {
  transform: rotateY(180deg);
}

.reveal-card-face {
  @apply absolute inset-0 rounded-xl border-2 text-center px-2 py-2 overflow-hidden;
  backface-visibility: hidden;
}

.reveal-card-front {
  background-image: url("/images/Back of card design.png");
  background-size: 100% 100%;
  background-position: center;
  background-repeat: no-repeat;
  background-color: #2a231e;
  background-blend-mode: multiply;
  border-color: #4a2020;
  color: var(--color-cream);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  gap: 0.6rem;
  padding-top: 20%;
}

.reveal-card-back {
  background: linear-gradient(135deg, #2a231e 0%, #1f1a16 100%);
  border-color: var(--color-success);
  color: var(--color-foreground);
  transform: rotateY(180deg);
  display: grid;
  grid-template-rows: auto minmax(0, 1fr) auto;
  gap: 0.35rem;
}

.reveal-card-label {
  font-family: var(--font-display);
  letter-spacing: 0.2em;
  @apply text-lg uppercase text-cream;
}

.reveal-card-back .reveal-card-label {
  @apply text-sm;
}

.reveal-card-divider {
  width: 66%;
  height: 1px;
  background: color-mix(in oklab, var(--color-cream) 60%, transparent);
}

.reveal-card-hint {
  @apply text-base text-cream/80;
}

.reveal-card-value {
  @apply text-lg font-semibold;
}

.reveal-card-media {
  @apply w-full flex items-center justify-center;
  aspect-ratio: var(--card-aspect-ratio);
  max-height: 100%;
  align-self: center;
  justify-self: center;
  border-radius: 0.75rem;
  overflow: hidden;
}

.reveal-card-image {
  @apply object-cover shadow-sm;
  width: 77%;
  height: auto;
  border-radius: 0.75rem;
  display: block;
  transform-origin: center;
}
